<script>
/**
 * Behavior to transform a UTC timestamp into human readable timestamps.
 *
 * All breakpoints are equivalent to the breakpoints by defined the Moment library
 * @see http://momentjs.com/docs/#/displaying/fromnow/
 * @type {Object}
 */
ToDateStringBehavior = {
  toDateString: function(text) {
    var diff = new Date(new Date().getTime() - new Date(text).getTime());
    var seconds = Math.ceil(diff / 1000);
    if (seconds < 45) {
      return '<1mi';
    }
    if (seconds < 90) {
      return '1mi';
    }
    var minutes = Math.ceil(seconds / 60);
    if (minutes < 45) {
      return minutes + 'mi';
    }
    if (minutes < 90) {
      return '1h';
    }
    var hours = Math.ceil(minutes / 60);
    if (hours < 22) {
      return hours + 'h';
    }
    // 1,5 day
    if (hours < 36) {
      return '1d';
    }
    var days = Math.ceil(hours / 24);
    // 3,5 weeks
    if (days < 25) {
      return days + 'd';
    }
    // 1,5 month
    if (days < 45) {
      return '1mo';
    }
    // 11,5 months
    if (days < 345) {
      return Math.ceil(days / 31) + 'mo';
    }
    // 1,5 year
    if (days < 545) {
      return '1y';
    }
    return Math.ceil(days / 365) + 'y';
  }
};
</script>
